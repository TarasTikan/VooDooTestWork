{"mappings":"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","sources":["src/js/basketProducts.js"],"sourcesContent":["import { products } from \"./fetchProducts.js\";\nimport { limit, page } from \"./index.js\";\n\nconst listProduct = document.querySelector(\"#listProduct\");\nconst listProductBasket = document.querySelector(\"#listProductBasket\");\nconst totalPrice = document.querySelector(\"#totalPrice\");\nconst totalProducts = document.querySelector(\"#totalProdacts\");\nconst basketBtn = document.querySelector('button[data-action=\"close\"]');\nconst basketContainer = document.querySelector(\"#basket\");\nconst basketExit = document.querySelector(\"#basketExit\");\n\nlistProduct.addEventListener(\"click\", handleAddCard);\nlistProductBasket.addEventListener(\"click\", handlePlusBtn);\nlistProductBasket.addEventListener(\"click\", handleMinusBtn);\nlistProductBasket.addEventListener(\"click\", handleRemoveCard);\nbasketBtn.addEventListener(\"click\", handelToggleBasket);\nbasketExit.addEventListener(\"click\", handelToggleBasket);\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  renderProductsBaket();\n  totalPriceProducts();\n  totalProductsNumber();\n});\n\nlet productItem = [];\nconst localProducts = JSON.parse(localStorage.getItem(\"products\"));\nif (Array.isArray(localProducts)) {\n  localProducts.map((item) => productItem.push(item));\n}\n\nasync function handleAddCard(e) {\n  if (e.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n  const res = await products(limit, page);\n  const findProductBasket = productItem.find(\n    ({ id }) => id === Number(e.target.id)\n  );\n  if (findProductBasket) {\n    return alert(\"Ви вже додавали цей продукт у корзину\");\n  }\n  const findProduct = res.products.find(({ id }) => id === Number(e.target.id));\n  const newProduct = { ...findProduct, number: 1 };\n  productItem.push(newProduct);\n  localStorage.setItem(\"products\", JSON.stringify(productItem));\n  renderProductsBaket();\n  totalPriceProducts();\n  totalProductsNumber();\n}\n\nfunction handleRemoveCard(e) {\n  if (\n    e.target.nodeName !== \"BUTTON\" &&\n    e.target.nodeName !== \"svg\" &&\n    e.target.nodeName !== \"use\"\n  ) {\n    return;\n  }\n  const removeItem = productItem.filter(({ id }) => id !== Number(e.target.id));\n  productItem = removeItem;\n  localStorage.setItem(\"products\", JSON.stringify(productItem));\n  renderProductsBaket();\n  totalPriceProducts();\n  totalProductsNumber();\n}\n\nfunction totalPriceProducts() {\n  const total = productItem.reduce((cal, item) => {\n    return cal + Number(item.variants[0].price) * item.number;\n  }, 0);\n  totalPrice.innerHTML = \" KR.\";\n  totalPrice.insertAdjacentHTML(\"afterbegin\", total.toLocaleString(\"en-US\"));\n}\n\nconst renderProductsBaket = () => {\n  const productItemBasket = productItem\n    .map(({ title, images, variants, id, number }) => {\n      const price = (\n        (variants[0].price || variants[0].compare_at_price) * number\n      ).toLocaleString(\"en-US\");\n      return `\n      <li class=\"flex gap-4 items-start \">\n        <img\n          src=\"${images.length > 0 ? images[0].src : './images/not-images.jpg'}\"\n          class=\"rounded-md border border-white border-opacity-50 w-[74px]\"\n        />\n        <div class=\"flex flex-col  justify-between w-widthInfoProduct h-heightImgBasket grid\">\n          <h3 class=\"text-yellow-50 text-sm font-bold\">${title}</h3>\n          <p class=\"text-yellow-50 text-sm font-bold\"> ${price} KR.</p>\n          <div class=\"flex\"><button type='button' class=\"w-5 h-5 text-center text-yellow-50 text-sm font-bold\" id=\"minus-${id}\">-</button><p class=\"w-5 h-5 text-center text-yellow-50 text-sm font-bold\" id=\"number\">${number}</p><button type='button' class=\"w-5 h-5 text-center text-yellow-50 text-sm font-bold\" id=\"plus-${id}\">+</button></div>\n        </div>\n        <button type='button' id=\"${id}\"><svg width=\"24px\" height=\"24px\" id=\"${id}\">\n          <use href=\"./images/icons.svg#icon-deleteIcon\" id=\"${id}\"></use>\n        </svg></button>\n      </li>`;\n    })\n    .join(\"\");\n  listProductBasket.innerHTML = \"\";\n  listProductBasket.insertAdjacentHTML(\"beforeend\", productItemBasket);\n};\nfunction totalProductsNumber() {\n  totalProducts.innerHTML = \"TOTAL: \";\n  const total = productItem.reduce((cal, item) => {\n    return cal + item.number;\n  }, 0);\n  totalProducts.insertAdjacentHTML(\"beforeend\", total);\n}\n\nfunction handlePlusBtn(e) {\n  if (!e.target.id.includes(\"plus\")) return;\n  const splices = e.target.id.split(\"-\");\n  const product = productItem.find(({ id }) => id === Number(splices[1]));\n  product.number = product.number + 1;\n}\nfunction handleMinusBtn(e) {\n  if (!e.target.id.includes(\"minus\")) return;\n  const splices = e.target.id.split(\"-\");\n  const product = productItem.find(({ id }) => id === Number(splices[1]));\n  product.number = product.number === 1 ? 1 : product.number - 1;\n}\n\nfunction handelToggleBasket() {\n  basketContainer.classList.toggle(\"hidden\");\n}\n"],"names":["$khrDK","parcelRequire","$8e27b601e058ba95$var$listProduct","document","querySelector","$8e27b601e058ba95$var$listProductBasket","$8e27b601e058ba95$var$totalPrice","$8e27b601e058ba95$var$totalProducts","$8e27b601e058ba95$var$basketBtn","$8e27b601e058ba95$var$basketContainer","$8e27b601e058ba95$var$basketExit","addEventListener","async","e","target","nodeName","res","products","$btpe3","limit","page","$8e27b601e058ba95$var$productItem","find","id","Number","alert","newProduct","number","push","localStorage","setItem","JSON","stringify","$8e27b601e058ba95$var$renderProductsBaket","$8e27b601e058ba95$var$totalPriceProducts","$8e27b601e058ba95$var$totalProductsNumber","includes","splices","split","product","removeItem","filter","$8e27b601e058ba95$var$handelToggleBasket","$8e27b601e058ba95$var$localProducts","parse","getItem","total","reduce","cal","item","variants","price","innerHTML","insertAdjacentHTML","toLocaleString","Array","isArray","map","productItemBasket","title","images","compare_at_price","length","src","join","classList","toggle"],"version":3,"file":"index.29c71b8e.js.map"}